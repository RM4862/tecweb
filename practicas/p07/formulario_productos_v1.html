<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title>Registro De Productos</title>
    <style type="text/css">
        ol,ul {
            list-style-type: none;
        }
    </style>
</head>

<body>
    <h1>Registro de Productos</h1>

    <form id="formulario" action="http://localhost:100/tecweb/practicas/p06/set_producto_v2.php" method="post"
        onsubmit="return validateForm()">

        <h2>Información de Productos</h2>

        <fieldset>
            <legend>Informacion</legend>

            <ul>
                <li>
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre" name="nombre" placeholder="Solo 99 caracteres" required><br>
                </li>

                <li>
                    <label for="marca">Marca:</label>
                    <select id="marca" name="marca" required>
                        <option value="" disabled selected>Selecciona una marca</option>
                        <option value="marca1">VAGABOX</option>
                        <option value="marca2">MndMeld</option>
                        <option value="marca3">Dosyu</option>
                        <option value="marca2">Shein</option>
                        <option value="marca3">Ilusion</option>
                        <option value="marca4">Suburbia</option>
                        <option value="marca5">Noonstop</option>
                        <option value="marca6">Bridals</option>
                        <option value="marca7">Mariposa</option>

                    </select>
                    <br>
                </li>

                <li>
                    <label for="modelo">Modelo:</label>
                    <input type="text" id="modelo" name="modelo" placeholder="Solo 25 caracteres" required><br>
                </li>

                <li>
                    <label for="precio">Precio:</label>
                    <input type="number" id="precio" name="precio" step="0.01" required min="99.99"><br>
                </li>

                <li>
                    <label for="detalles">Detalles:</label>
                    <textarea id="detalles" name="detalles" rows="4" cols="50" placeholder="Solo 250 caracteres"></textarea><br>
                </li>

                <li>
                    <label for="unidades">Unidades:</label>
                    <input type="number" id="unidades" name="unidades" required min="0"><br>
                </li>

                <li>
                    <label for="urlImagen">URL de la Imagen:</label>
                    <input type="text" id="urlImagen" name="urlImagen">
                    <br>
                </li>
            </ul>
        </fieldset>

        <p>
            <input type="submit" value="Registrar mis productos">
            <input type="reset">
        </p>

    </form>

    <script>
        function validateForm() {
            var nombre = document.getElementById("nombre").value;
            var marca = document.getElementById("marca").value;
            var modelo = document.getElementById("modelo").value;
            var precio = document.getElementById("precio").value;
            var detalles = document.getElementById("detalles").value;
            var unidades = document.getElementById("unidades").value;
            var urlImagen = document.getElementById("urlImagen").value;

            // a. El nombre debe ser requerido y tener 100 caracteres o menos.
            if (nombre === "" || nombre.length > 100) {
                alert("El nombre es requerido y debe tener 100 caracteres o menos.");
                return false;
            }

            // b. La marca debe ser requerida y seleccionarse de una lista de opciones.
            if (marca === "") {
                alert("La marca es requerida.");
                return false;
            }

            // c. El modelo debe ser requerido, texto alfanumérico y tener 25 caracteres o menos.
            if (modelo === "" || !/^[a-zA-Z0-9 ]{1,25}$/.test(modelo)) {
                alert("El modelo es requerido, debe ser alfanumérico y tener 25 caracteres o menos.");
                return false;
            }

            // d. El precio debe ser requerido y debe ser mayor a 99.99
            if (precio === "" || parseFloat(precio) <= 99.99) {
                alert("El precio es requerido y debe ser mayor a 99.99.");
                return false;
            }

            // e. Los detalles deben ser opcionales y, de usarse, deben tener 250 caracteres o menos.
            if (detalles.length > 250) {
                alert("Los detalles deben tener 250 caracteres o menos.");
                return false;
            }

            // f. Las unidades deben ser requeridas y el número registrado debe ser mayor o igual a 0.
            if (unidades === "" || parseInt(unidades) < 0) {
                alert("Las unidades son requeridas y deben ser mayores o iguales a 0.");
                return false;
            }

            // g. La ruta de la imagen debe ser opcional, pero en caso de no registrarse se debe usar la ruta de una imagen por defecto.
            var imgElement = document.getElementById("productImage");
            if (urlImagen === "") {
                // Set default image URL
                urlImagen = "/img/cat.png";
            }
            imgElement.src = urlImagen;

            return true; // Enviar el formulario si todas las validaciones pasan
        }
    </script>
</body>

</html>